{% extends "admin/base.html" %}

{% load static %}

{% block head %}
<style>
    .current-thumb {
        width: 150px;
        height: 150px;
        object-fit: scale-down;
        border: 1px solid #ccc;
        margin-bottom: 15px;
    }
</style>
{% endblock %}

{% block content %}
<div class="layout-px-spacing">
    <div class="page-header">
        <div class="page-title">
            <h3>Edit Post (ID: {{ post.id }})</h3>
        </div>
    </div>

    <div class="row" id="cancel-row">
        <div class="col-xl-8 col-lg-8 col-sm-12 layout-spacing">
            <div class="widget-content widget-content-area br-6">
                
                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %} 
                    
                    <h4>Currently Uploaded File:</h4>
                    {% if post.image %}
                        <img src="{{ post.image.url }}" class="current-thumb" alt="Current Image">
                    {% else %}
                        <p>No image upload.</p>
                    {% endif %}

                    {{ form.as_p }}
                    
                    <div class="d-flex gap-2 mt-3">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> I-save ang Pagbabago
                        </button>
                        <a href="{% url 'admin_dashboard' %}" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Cancel
                        </a>
                        <a href="{% url 'delete_post' id=post.id %}" class="btn btn-danger ml-auto" 
                           onclick="return confirm('Sigurado ka bang gusto mong i-delete ang post na ito?');">
                            <i class="fas fa-trash"></i> Delete
                        </a>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>
{% endblock %}